{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"WELCOME","text":"","tags":["welcome"]},{"location":"#blog","title":"blog","text":"<p>GoTo BLOG</p>","tags":["welcome"]},{"location":"#content-on-this-website","title":"content on this website","text":"<p>This site contains all my DBA and SRE KnowHow and will be updated continuasly: -  searchable lists of commands for postgresql databases adminstration  -  Kubernetes documentations for beginners -  some great tips and trick i've learned over the years -  whatever will come to my mind</p> <p>my mindset</p> <p>I'm an inquisitive database admin evolving a Site Reliability Engineering mindset. The ability to build reliable, high-quality systems and technical abilities depends on a team with a positive work culture.</p> <p>Ich bin ein wissbegieriger Datenbankadministrator mit einer Denkweise des Site Reliability Engineering. Die F\u00e4higkeit, zuverl\u00e4ssige, hochwertige Systeme und technische F\u00e4higkeiten zu entwickeln, h\u00e4ngt von einem Team mit einer positiven Arbeitskultur ab.</p>","tags":["welcome"]},{"location":"#reach-out-to-me","title":"reach out to me","text":"<ul> <li>\ud83d\udc40 I\u2019m interested in Python, HTML, CSS, PostgreSQL, MariaDB, HANA, Oracle, Bash, Linux, MacOS and since some short time in Golang</li> <li>\ud83c\udf31 I\u2019m currently learning Python and GoLang</li> <li>\ud83d\udceb How to reach me:</li> <li>Twitter: @DBALucasD</li> <li>Masterdon: @dbalucas</li> <li>Instagram: @dbalucasd</li> <li>Xing: Lucas</li> <li>LinkedIn: Lucas</li> <li>Github: @dbalucas</li> </ul>","tags":["welcome"]},{"location":"license/","title":"Credits","text":"","tags":["license","credits","mentions"]},{"location":"license/#license","title":"license","text":"<p>Due all of the contenct is from an OpenSource Software. Everything I've learned is somewhere from the internet, manuals, documenations, https://dba.stackexchange.com/ a.s.o. As well I'd like to mention that much of my commands and knowhow I've learned from reading the <code>PostgreSQL 14 Administration Cookbook</code> <code>ISBN 978-1-80324-897-4</code>, written by Simon Riggs and Gianni Ciolli.</p>","tags":["license","credits","mentions"]},{"location":"license/#credits","title":"credits","text":"<p>Thanks to google to provide this awesome content and sharing your experience:</p>","tags":["license","credits","mentions"]},{"location":"blog/","title":"Blog","text":""},{"location":"blog/#2023","title":"2023","text":""},{"location":"blog/#how-i-setup-my-github-pages-feb","title":"How I setup my github pages - Feb","text":""},{"location":"blog/#2022","title":"2022","text":""},{"location":"blog/#welcome-to-my-blog-dec","title":"Welcome to my blog - Dec","text":""},{"location":"blog/posts/2022/welcome/","title":"Willkommen auf meinem Blog","text":"<p>Heute ist der Tag, an dem ich es endlich geschafft habe meine ersten Blog zu ver\u00f6ffentlichen. Zuerst einmal toll, dass du hier auf meiner Seite gelandet bist. Erwarte f\u00fcr\u2019s erste nicht zu viel. Ich probiere mich erst mit Bloggen aus. Als ein Datenbankadministrator stelle ich immer wieder dabei fest, dass manche Dinge gerade bei WordPress sehr viel einfacher als gedacht funktionieren\u2026 Vielleicht kennst du das Gef\u00fchl ja auch, oder hast du dich dabei schon mal erwischt?</p> <p>Ich geh\u00f6re zu den Menschen, die erst eine Thematik komplett durchdringen wollen, ehe sie diese dann wiedergeben und anschlie\u00dfen auch weitergeben k\u00f6nnen. Wie sieht es da bei dir aus? Geh\u00f6rst du auch dazu? Nun ja, oft denke ich mir, dass ich mir damit selbst im Weg stehe, aber andererseits wird man dann wieder daf\u00fcr gelobt, dass man seine Arbeit mal wieder richtig qualitativ und ordentlich gemacht hat\u2026 was da nun das beste ist wird uns wohl nur die Zukunft zeigen, oder ob in 80/20 wirklich die Wahrheit liegt und was genau dann 80% und was 20% sind, \u2026. wir werden sehen.</p> <p>Lass dich auf jeden Fall in das spannende Umfeld von Datenbanken, Unternehmenskultur, H\u00fcrden, Lustige Momente, \u201eAgil\u201c, Squad Lead/Teamleitung, Azure, AWS, OnPremise, Architecture, Python, Django, PostgreSQL, MariaDB, SAP HANA, Oracle, React, JS, Ansible, Terraform, WordPress und was auch sonst noch immer mir in den Sinn kommt, mit hinein nehmen.</p> <p>Ich beanspruche definitiv nicht! die Weisheit mit L\u00f6ffeln gefuttert zu haben und bin daher f\u00fcr konstruktive Korrekturen, Feedback und Verbesserungsvorschl\u00e4ge gerne offen!</p>","tags":[2022,"German"]},{"location":"blog/posts/2023/setup_github_pages_mkdocs/","title":"How I setup my github pages","text":"<p>Hello there ,</p> <p>today has been a quite relaxing one, so I used to power to dig a little more to the documentation topic. After some time I finally figured out how I'd like to have my further documentations and blogs. - for the moment </p> <p>So if you want to check out the technical details - click here. </p> <p>regards dbalucas</p>","tags":["KBA",2023,"English"]},{"location":"knowledgebase/DBA/postgresql/backup/setup_barman/","title":"PG Barman Setup","text":"","tags":["barman"]},{"location":"knowledgebase/DBA/postgresql/backup/setup_barman/#requirements","title":"Requirements","text":"<p> IMPORTANT </p> <p>As DBAs we're not planning for backups! We're ensuring the recoverability of a system! - *PostgreSQL14 Cookbook</p> <ul> <li>python3.6 or greater</li> <li>postgres11 or greater</li> </ul>","tags":["barman"]},{"location":"knowledgebase/DBA/postgresql/backup/setup_barman/#different-implementations-to-choose","title":"Different implementations to choose","text":"<p>You can chosse to go with different types of backup. Every backup implementation has advantages and disadvanteges. A reliable and proper manner of backing up single node systems is using the standalone hot physical backup via <code>pg_basebackup</code> and xfs files systems snapshots.  The second option was requested after implementing PostgreSQL HA and therefore the backup agent was lacking funktionalities regarding handling backups on the second or backup node.</p> <p>We came up to the idea that we give pgBarman a chance and try the approach of replicating the WAL files to the backup node. (It somehow behaves as a standby node.)</p> <p>The configuration can be found in the public dokumentation of course, due this tool is open source.</p>","tags":["barman"]},{"location":"knowledgebase/DBA/postgresql/backup/setup_barman/#just-how-i-did-it","title":"just how I did it","text":"<ul> <li>create a virtual env for barman &amp;&amp; install barman and all dependencies (like psycopg2) this is only required when you can't install it via yum, apt, zypper, a.s.o.</li> <li>create directory and config files</li> <li><code>/etc/barman.d/</code></li> <li><code>/etc/barman.conf</code></li> <li><code>/home/barman/barman/barman.conf</code></li> </ul>","tags":["barman"]},{"location":"knowledgebase/DBA/postgresql/backup/setup_barman/#backup-tools","title":"Backup tools","text":"<ul> <li>pgBarman</li> <li>pgBackRest</li> <li>pgboard</li> <li>wal-e</li> <li>wal-g</li> </ul>","tags":["barman"]},{"location":"knowledgebase/DBA/postgresql/config/postgres_env/","title":"postgres user env","text":"","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/config/postgres_env/#importent-environment-parameters-to-be-considered-for-os-user-of-postgresql","title":"importent environment parameters to be considered for os user of postgresql","text":"<pre><code>export $PGDATA\nexport $PGDATABASE\nexport $PGHOST\nexport $PGPASSFILE\nexport $PGPASSWORD\nexport $PGPORT\n</code></pre>","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/config/postgresql_conf/","title":"postgresql.conf stuff","text":""},{"location":"knowledgebase/DBA/postgresql/config/postgresql_conf/#usefull-server-configurations-in-general","title":"Usefull server configurations in general","text":"<p>Location of the File is $PGDATA/postgresql.conf and postgresql.auto.conf or use sql command: <code>show [db-parameter];</code></p> <p>This file contains cluster/instance wide configurations.</p>"},{"location":"knowledgebase/DBA/postgresql/config/postgresql_conf/#behavior-of-postghost-usermod-a-g-wheel-postgresresqlautoconf","title":"Behavior of postghost:~ # usermod -a -G wheel postgresresql.auto.conf","text":"<ul> <li>this configuration file must not be edited manually!!</li> <li>every <code>alter system set {configuration_parameter}</code> will be stored there</li> <li>as well as <code>alter database set {configuration_parameter}</code> (depends on your db connection)</li> <li>and of course we can do the same on user or session level: <code>alter user set {configuration_parameter}</code> or <code>alter session set {configuration_parameter}</code>.</li> <li>hierachie of applying the parameters: postgresql.conf (last line counts) &gt; postgresql.auto.conf (last line counts, as well)</li> <li>parameters can be removed by <code>alter system reset {configuration_parameter}</code> or to remove all: <code>alter system reset all</code></li> </ul>"},{"location":"knowledgebase/DBA/postgresql/config/postgresql_conf/#promote-your-configuration-to-the-database-cluster","title":"Promote your configuration to the database cluster","text":"<p>To reload the new configuration please reload via: <code>systemctl reload postgresql.service</code> or via sql: <code>select pg_reload_conf();</code>.</p>"},{"location":"knowledgebase/DBA/postgresql/config/postgresql_conf/#lets-get-started-with-the-parameters-recommendations","title":"Let's get started with the parameters recommendations","text":"connection parameter recommendations listen_address localhost,{appserver} port 5432 (default) max_connections 100  (default) superuser_reserved_connections 3 !! important !! security + authentication recommendations password_encryption scram-sha-256 enable_ssl on ssl settings recommendations ssl_ca_file specify CA or bundle chain ssl_cert_file specify location of host certificate ssl_crl_file ssl_key_file location of cert key-file on host ssl_cipher configure allowed cipher ssl_dh_params_file"},{"location":"knowledgebase/DBA/postgresql/maintenance/vacuum_timeout/","title":"vacuum timeout","text":"<p>We can try to use pg_stat_user_tables to verify the latest time of autovacuum.</p> <pre><code>    SELECT\n      schemaname, relname,\n      last_autovacuum,\n      last_autoanalyze\n    FROM pg_stat_user_tables;\n</code></pre> <p>Establish a connection through psql or pgadmin and execute <code>SET statement_timeout = 0</code>; before issuing a VACUUM statement on that connection. A timeout of 0 disables this setting. You can also set a statement timeout value. This configured statement timeout value is in milliseconds. To check the value set for this parameter, use the command: <code>postgres=# show statement_timeout;</code></p>","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/maintenance/vacuum_timeout/#credits","title":"credits","text":"<p>https://stackoverflow.com/questions/72555152/postgres-pg-statistic-vacuum-timeout https://knowledge.broadcom.com/external/article/17969/postgres-vacuum-command-fails-and-gives.html</p>","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/maintenance/vacuumdb/","title":"db maintenance","text":"","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/maintenance/vacuumdb/#running-vacuum-on-all-databases-of-a-specified-group-including-analyze-via-ansible1","title":"running vacuum on all databases of a specified group including analyze via ansible1","text":"","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/maintenance/vacuumdb/#pre-requisites","title":"pre requisites","text":"<p>is to have an inventory file configured. In this example I created a sub group called dev.</p>","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/maintenance/vacuumdb/#command","title":"command:","text":"<p><code>ansible **dev** -m ansible.builtin.shell -a 'su - postgres -c \"vacuumdb --jobs=2 --parallel=2 --all --analyze\"' -i ansible/ansible_vault_inventory/hosts.yaml -k -K -b</code></p>","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/sql_commands/usefull_sql/","title":"usefull sql commands","text":""},{"location":"knowledgebase/DBA/postgresql/sql_commands/usefull_sql/#show-configuration","title":"Show Configuration","text":"<ul> <li><code>sql&gt; show data_directory;</code></li> <li><code>sql&gt; show [db-parameter];</code></li> <li><code>sql&gt; \\conninfo;</code></li> </ul>"},{"location":"knowledgebase/DBA/postgresql/sql_commands/usefull_sql/#show-configuration-from-directory","title":"show configuration from directory","text":"<ul> <li><code>sql&gt; \\d pg_file_settings</code></li> <li><code>sql&gt; \\d pg_settings</code> It describes the settings which are configured and from which layer of configuration it's comming from. Example: <code>sql&gt; SELECT * FROM pg_catalog.pg_settings;</code></li> </ul>"},{"location":"knowledgebase/DBA/postgresql/tools/pg_controldata/","title":"pg_controldata","text":"<p><code>pg_controldata</code> can be used to view the control information for a database cluster</p>"},{"location":"knowledgebase/DBA/postgresql/tools/pg_controldata/#example-usage","title":"Example usage","text":"<p><code>pg_controldata [DATADIR]</code></p>"},{"location":"knowledgebase/DBA/postgresql/tools/pg_ctl/","title":"pg_ctl","text":"<p><code>pg_ctl</code> can be used to stop a database cluster:</p> shortcut long Description -mf -m fast Fast Mode, proper shutdown (default) -mi -m immediate Immediate Mode, without complete shutdown, leads to recovery -ms -m smart Smart Mode, after all clients have disconnectedn (you can force close the connections manually) -t [secs] - seconds <p>Always use the <code>-D /path/to/datadir/</code> to specify the cluster's datadir.</p>","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/tools/pg_hba_conf/","title":"Pg hba conf","text":"<p>title: pg_hba.conf date: 2023-03-16 authors: [dbalucas] description: &gt;   {{ description }} categories:   - postgres   - config tags:     - pg</p>"},{"location":"knowledgebase/DBA/postgresql/tools/pgpass/","title":"how .pgpass works","text":"","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/tools/pgpass/#introduction","title":"Introduction","text":"<p>the .pgpass file is required for authentication with scram-sha-256 for automation purposes. Here you can store passwords for special use cases (like backup and vacuumdb tools).</p>","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/tools/pgpass/#template","title":"Template","text":"","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/tools/pgpass/#postgres-pgpass-file","title":"postgres .pgpass file","text":"<pre><code>    #hostname:port:database:username:password\n    localhost:5432:*:backupuser:supersecret\n    127.0.0.1:5432:*:backupuser:supersecret\n    localhost:5432:*:maintenanceuser:supersecret\n    127.0.0.1:5432:*:maintenanceuser:supersecret\n</code></pre> <p>Of course it's not perfect to have this available. From our point of view it's important for usability and administrativ purposes. When the server itself is secured in a well network segment and has limited access to the operating system. File permission must be set with <code>0600</code>.</p> <p>Please bear in mind to maintaine the pg_hba.conf accordingly.</p>","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/tools/usefull_tools/","title":"dba tools","text":"","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/tools/usefull_tools/#documentation","title":"Documentation","text":"<ol> <li>mkdocs hosts our general documentation written in markdown</li> <li>pandoc helps you converting word and other formats to markdown</li> </ol>","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/tools/usefull_tools/#administration","title":"Administration","text":"<ol> <li>pgAdmin4 is the database developer and admin interface.</li> <li>pgTune help setting the correct database parameters for system tuning</li> <li>pg_basebackup is a good backup solutions or go with pgBarman</li> </ol>","tags":["pg"]},{"location":"knowledgebase/DBA/postgresql/tools/usefull_tools/#automation","title":"Automation","text":"<ol> <li>Ansible is a free and open source configuration tool. It's developed by Red Hat and has a proprietary branch as well. </li> <li>AWX is a free and open source alternative to the Red Hat Ansible tower. </li> </ol>","tags":["pg"]},{"location":"knowledgebase/DBA/troubleshooting/failed_connections/","title":"Troubleshooting failed database connections:","text":"<ul> <li>at first please check that you used the correct parameters!</li> <li>check for explicit rejections. <code>rejects connection for...</code> You're violating the administrators security policies!</li> <li>check of implicit  rejections. <code>no pg_hba.conf entry for ...</code> Contact the administrator to explicitly reject or allow this connection.</li> <li>next try using <code>psql</code> (maybe you're client is badly configured)</li> <li>next use <code>pg_isready</code>-tool. It creates a minimal connection and has different returncodes:</li> <li>server is ready and accepting connection.</li> <li>not accepting connections due to system procedures (start, stop, recover)</li> <li>connection attempt, but failed</li> <li>no connection attempt was made (client problem or out of memory)   -&gt; here the database administrator has to step in:</li> <li>check if server is down</li> <li>check if the server is listening for remote / local connections</li> <li>check if db or user exists</li> <li>check the system log</li> <li>check if you have connected to the <code>MASTER</code> or <code>HOT_STANDBY=ON</code></li> </ul>"},{"location":"knowledgebase/DBA/troubleshooting/recovery_troubleshooting/","title":"Disaster Recovery issues","text":""},{"location":"knowledgebase/DBA/troubleshooting/recovery_troubleshooting/#pg_resetwal-is-a-bad-choice","title":"pg_resetwal is a bad choice","text":"<p>Before executing it,take care you have a backup avialable! This tool will cause data lost, due to it's functionality of cleaning up old WAL's in pg_wal.  To quote Simon Riggs from his Cookbook: \"You don't know for certain that doing this will fix a problem, but once you've done it, going back will be hard.\"</p>"},{"location":"knowledgebase/DBA/troubleshooting/server_uptime/","title":"Display server uptime with SQL","text":"<p>Issue following SQL command to show the database system uptime: <code>SELECT date_trunc('second', current_timestamp - pg_postmaster_start_time()) as uptime;</code></p> <p><code>SELECT pg_postmaster_start_time();</code></p> <p><code>SELECT current_timestamp - pg_postmaster_start_time();</code></p>"},{"location":"knowledgebase/DBA/troubleshooting/wal_dir_full/","title":"wal dir full","text":""},{"location":"knowledgebase/DBA/troubleshooting/wal_dir_full/#reproduce-the-issue","title":"reproduce the issue","text":"<p>Try executing the backup again and check if the issue still persists...</p> <pre><code>hostname:~ # /usr/NBPostgreSQLAgent/nbpgsql -o backup\nAssuming PostgreSQL installation mode\nFailed to execute PostgreSQL query: SELECT pg_stop_backup()\nERROR:  canceling statement due to statement timeout\n\nFailed to execute PostgreSQL query: SELECT pg_stop_backup()\nERROR:  exclusive backup not in progress\n</code></pre>"},{"location":"knowledgebase/DBA/troubleshooting/wal_dir_full/#understand-the-issue","title":"understand the issue","text":"<p>Check the file system is fine?</p> <p><pre><code>hostname:~ # df -Ph\nFilesystem                   Size  Used Avail Use% Mounted on\n/dev/mapper/vgroot            25G   12G    5G  48% /\n/dev/mapper/vgdata-lvpghome  5.0G    1G  4.0G  20% /home/postgres\n/dev/mapper/vgdata-lvpgwal    20G   20G   84K 100% /srv/postgres/wal\n/dev/mapper/vgdata-lvpgdata   45G   29G   17G  64% /srv/postgres/data\nhostname:~ #\n</code></pre> Congrants! You found the nasty guy. WAL dir full is bad. If you urgently want to fix something:</p> <ul> <li>Goto the WAL directory</li> <li>Check with backup team which WALs are already backed up</li> <li>cleanup old WALs with: <code>pg_archivecleanup /srv/postgres/wal/ xxxxx.xxxxx.backup</code> (includes the latest backup)</li> </ul> <p>!!!IF YOU'RE NOT 100% SURE WHAT WILL HAPPEN: DRY-RUN this command with <code>-n</code> option!!!!</p>"},{"location":"knowledgebase/GIT/git_config/","title":"setup a good gitconfig","text":"<pre><code>vi ~/.gitconfig\n\n#!/.giconfig\n[user]\n        name = &lt;username&gt;\n        email = &lt;mailaddres&gt;\n[init]\n        defaultBranch = main\n[alias]\n    cleanup = \"!git branch --merged | grep  -v '\\\\*\\\\|master\\\\|develop\\\\main' | xargs -n 1 -r git branch -d\"\n</code></pre> <p>To avoid having thousend of local branches not alligned with the remote repository, just do: <pre><code>git cleanup\n</code></pre></p>","tags":["git"]},{"location":"knowledgebase/GIT/git_flaws/","title":"Git flaws","text":"","tags":["git"]},{"location":"knowledgebase/GIT/git_flaws/#summary","title":"Summary:","text":"<p>Today I read an article about some git flaws. Moste people are not aware of it. Private and Public repositories are not always secure by default. This article is a referrence to the circumstances:</p> <p>https://trufflesecurity.com/blog/anyone-can-access-deleted-and-private-repo-data-github</p> <p>We have a few takeaways from this:</p> <ol> <li>As long as one fork exists, any commit to that repository network (ie: commits on the \u201cupstream\u201d repo or \u201cdownstream\u201d forks) will exist forever</li> <li>This further cements our view that the only way to securely remediate a leaked key on a public GitHub repository is through key rotation. &gt; We\u2019ve spent a lot of time documenting how to rotate keys for the most popularly leaked secret types - check our work out here: howtorotate.com.</li> <li>GitHub\u2019s repository architecture necessitates these design flaws and unfortunately, the vast majority of GitHub users will never understand how a repository network actually works and will be less secure because of it.</li> <li>As secret scanning evolves, and we can hopefully scan all commits in a repository network, we\u2019ll be alerting on secrets that might not be our &gt; own (ie: they might belong to someone who forked a repository). This will require more diligent triaging.</li> <li>While these three scenarios are shocking, that doesn\u2019t even cover all of the ways GitHub could be storing deleted data from your repositories. Check out our recent post (and related TruffleHog update) about how you also need to scan for secrets in deleted branches. </li> </ol> <p>Finally, while our research focused on GitHub, it\u2019s important to note that some of these issues exist on other version control system products.</p>","tags":["git"]},{"location":"knowledgebase/GIT/git_rules/","title":"Git Rules","text":""},{"location":"knowledgebase/GIT/git_rules/#the-7-rules-of-a-great-git-commit-message","title":"The 7 rules of a great git commit message:","text":"<ol> <li>Separate subject from body with a blank line</li> <li>Limit the subject line to 50 characters</li> <li>Capitalize the subject line</li> <li>Do not end the subject line with a period</li> <li>se the imperative mood in the subject line</li> <li>Wrap the body at 72 characters</li> <li>Use the body to explain what and why vs. how</li> </ol>"},{"location":"knowledgebase/GIT/git_rules/#when-to-commit","title":"When to commit:","text":"<ol> <li>I complete a unit of work.</li> <li>I have changes I may want to undo.</li> </ol>"},{"location":"knowledgebase/GIT/learning_git/","title":"learning git inveractivly","text":"","tags":["git"]},{"location":"knowledgebase/GIT/learning_git/#learning-git-inveractivly","title":"learning git inveractivly","text":"<p>w3school w3school git game</p>","tags":["git"]},{"location":"knowledgebase/GIT/learning_git/#configure-git-client","title":"configure git client","text":"<pre><code>git config --global user.name \"username\"\ngit config --global user.email \"email@adress\"\n</code></pre>","tags":["git"]},{"location":"knowledgebase/GIT/setup_github_pages_mkdocs/","title":"Installation documentation gh-pages with mkdocs","text":"<ol> <li>setup python venv: <code>python3.x -m venv .venv &amp;&amp; source .venv/bin activate</code> </li> <li>update pip: <code>pip install --upgrade pip</code></li> <li>install mkdocs via pip: <code>pip install mkdocs, mkdocs-material, mkdocs-material-extensions, mkdocs-markdownextradata-plugin, mkdocs-blog-plugin</code></li> <li><code>pip freeze &gt;&gt; requirements.txt</code> to more easily update them later or share your setup with others.</li> <li></li> </ol>"},{"location":"knowledgebase/K8S/kubectl/","title":"Kubectl","text":"<p>title: kubernetes k8s date: 2023-02-10 authors: [dbalucas] description: &gt;   {{ description }} categories:   - {{ category }} tags:   - {{ tags }}</p> <p>config.yml:</p> <pre><code>apiVersion: postgresql.cnpg.io/v1\nkind: Cluster\nmetadata:\nname: cluster-example\nspec:\ninstances: 3\nstorage:\nsize: 1Gi\n</code></pre> <p><code>kubectl apply -f config.yml</code></p> <p><code>kubectl get cluster</code></p>"},{"location":"knowledgebase/SRE/certificates/","title":"certificates","text":"","tags":["certificates","privatkey","tls","ssl","SAN","key","csr","signing request"]},{"location":"knowledgebase/SRE/certificates/#how-to-verify-if-a-private-key-matches-a-certificate","title":"How to verify if a Private Key Matches a Certificate?","text":"<pre><code>  openssl x509 -noout -modulus -in cert.crt | openssl md5\n  openssl rsa -noout -modulus -in privkey.txt | openssl md5\n</code></pre>","tags":["certificates","privatkey","tls","ssl","SAN","key","csr","signing request"]},{"location":"knowledgebase/SRE/certificates/#how-tos","title":"How tos....","text":"","tags":["certificates","privatkey","tls","ssl","SAN","key","csr","signing request"]},{"location":"knowledgebase/SRE/pytest/","title":"mock env variables pytest","text":""},{"location":"knowledgebase/SRE/pytest/#how-it-works","title":"how it works","text":"<p>at first you have to </p>"},{"location":"knowledgebase/SRE/pytest/#sources","title":"sources","text":"<p>https://stackoverflow.com/questions/31582750/python-mock-patch-os-environ-and-return-value</p>"},{"location":"knowledgebase/SRE/pytest/#the-code","title":"the code","text":"<pre><code>    import os\n    import sys\n    import pytest\n    from unittest import mock\n    from click.testing import CliRunner\n\n    def mockenv(**envvars):\n        return mock.patch.dict(os.environ, envvars)\n\n    def check_sap_env():\n        click.echo(\"Checking the Linux environment ...\")\n        if os.environ.get(\"SPECIAL_ENVVAR\") is None:\n            click.echo(\"Linux environment must be set before running this script.\")\n            sys.exit(1)\n\n    @mockenv(SPECIAL_ENVVAR=\"/path/to/env\")\n    def test_get_os_env():\n      assert os.getenv(\"SPECIAL_ENVVAR\") is not None\n</code></pre>"},{"location":"knowledgebase/SRE/sre/","title":"Site Reliability Engineer (SRE)","text":"","tags":["sre","roles","theory"]},{"location":"knowledgebase/SRE/sre/#tenets-of-sre","title":"tenets of SRE","text":"<p>In general, an SRE team is responsible for the</p> <ul> <li>availability, </li> <li>latency, </li> <li>performance, </li> <li>efficiency, </li> <li>change management, </li> <li>monitoring, </li> <li>emergency response, </li> <li>and capacity planning </li> </ul> <p>of their service(s)</p>","tags":["sre","roles","theory"]},{"location":"knowledgebase/SRE/sre/#take-aways","title":"take aways:","text":"<p>SRE should caps 50% of their time on operational work. The remaining time should be spent on project work until the load drops to 50% or lower again.</p> <p> practices hint</p> <p>Monitor the operational work being done by SRE's and</p> <ul> <li>redirect operational work to the development team teams, </li> <li>reassigning bugs and tickets to development managers, </li> <li>integrate developers in on-call rotations and so on ...</li> </ul>","tags":["sre","roles","theory"]},{"location":"knowledgebase/SRE/sre/#credits","title":"credits","text":"<p>Thanks to google to provide this awesome content and sharing your experience:</p>","tags":["sre","roles","theory"]},{"location":"knowledgebase/SRE/Prometheus/install/","title":"Install","text":"<p>title: Prometheus install (simple) date: summery about installing prometheus simply (imho) authors: [dbalucas] description: &gt;   {{ description }} categories:   - knowledge base   - training tags:   - prometheus   - linux</p>"},{"location":"knowledgebase/VS_ZSH/zsh_defaults/","title":"How to setup a useful zsh","text":""},{"location":"knowledgebase/VS_ZSH/zsh_defaults/#further-useful-envs-for-vs-code","title":"further useful ENVs for VS Code","text":"<p>this helps you adjust files via VS code, when you open then with vim export EDITOR=\"code -w\"</p>"}]}